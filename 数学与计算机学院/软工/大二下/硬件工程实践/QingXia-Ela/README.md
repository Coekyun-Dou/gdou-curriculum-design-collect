# 硬件工程实践

## 前言

这是大二下学期在最后期末加的硬件实践课，会让你用 quartus ii 上板做东西

这板子很贵，小心点用（逃

该实验有两个要求：

1. 简易 24 小时计数器
2. 以下二选一：
   - 带功能的 24 小时计时器
   - 一个 4bit 的 CPU

以上要求完成后你的成绩上限是满分的 70 分，如果想要高分则需要自己加功能

本人仅实现了需求 1 + 需求2.1，即 70 分及格线水平，如果你想要加功能可以自己加个秒表，且带时间存储功能

详细要求见本文件夹下的 pdf 任务书吧

## 本文件夹的文件结构

`answer` 下就是可烧录到板子上的设计图，其中 `ez_counter` 是需求1，`hard_counter` 是需求2.1 的实现，其余的文件你可以不用管了

pdf 文件就是实验要求与指导

csv 文件是针脚对应图，你可以通过这个文件给所有的输入输出引脚快速导入实际插板上对应的位置

烧录、手动接针脚过程请自行百度或者查看老师在学习通发送的压缩包里的视频

## 提示

本提示仅针对普通班和功能计数器，卓越班可以另外找大哥问问

### 时钟模块

这个点是最抽象的一个地方，每块板子特性都不同，笔者在这里建议使用 lpm_counter + lpm_compare + t触发器 来实现 1hz 时钟

具体可以见 `answer/hard_counter/clock_27mhz.bdf` 

每块板性质可能都不太一样，可能计时器在这个板子能用，在另外一个板就坏了或者慢了，一定要学会自己 debug，模拟不代表真实情况！

### 需求1

需求1 的简单计数器实现很快，个人建议使用 lpm_counter 的宏模块生成做，清零采用同步清零

不建议这时就想着模块复用，需求2 有很多地方可以模块复用的

个人认为唯一可以复用的就是 1hz 时钟模块了

### 需求2

需求2 的计数器同理，唯一要处理的就是 24 计数器，00 -> 23 的过程

lpm_counter 有一个 sync set 的引脚选项，可以通过这个来直接设置 3 这个数字

### 其他

有的板子可能按钮坏了或者不是那么好按，如果按钮不行可以换一下其他按钮或开关

## 碎碎念

个人觉得有能力的话还是可以去做 cpu 的，毕竟计数器顶层图都有了，而且最大的问题就是很多边界情况要考虑，会弄得你很烦

cpu 的话上学期的计组实验是有做一个框架出来的，你也可以基于那个去改

虽然个人建议还是从头一点点来（逃

不要忘了，你是一个计算机学生，而不是连栈内存和堆内存都分不清的码农

本实验答案仅仅是一个参考，线什么的建议自己连，自己做一遍，别待会实训报告都被打回，说抄袭了
